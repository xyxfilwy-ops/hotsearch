---
name: omni-hotsearch-ideation
description: 基于全网热搜榜单自动抓取、联网检索背景、生成热点事件脉络，并按“有趣度80+有用度20=总分100”产出可落地的产品创意（名称/核心功能/目标用户），最终生成一份列表式HTML分析报告并对高分热点突出呈现。适用于“全网热搜/热搜榜/热点拆解/产品创意/HTML报告/联网搜索背景信息”等请求；不用于泛泛的头脑风暴或不需要联网检索的产品讨论。
license: Proprietary
---

# 全网热搜产品创意分析（自动抓取 + 联网检索 + 评分 + HTML报告）

## 静默执行协议（必遵守）

- 不要询问“是否继续/要不要我做/是否确认”等确认类问题。
- 一次性完成从抓取到产出HTML的全流程，除非关键输入完全缺失且无法推断。
- 任何字段缺失都按“默认值与降级策略”处理：记录在报告内并继续，不中断。
- 若信息不足以支撑结论：输出“可验证的事实 + 明确的不确定性”，不要编造细节。
- 当输出过长风险出现：自动缩减（减少每条热点的来源数与时间线条目），仍保证单个HTML文件输出。

## 你需要的输入（从用户消息中提取）

**必需：**
- `hotSearchApiUrl`：一个可直接访问的API，用于返回全网热搜榜单数据（JSON优先，可混合多平台）。

**可选：**
- `hotSearchApiKey`：当API需要密钥时使用（默认空）。若提供该值且 `hotSearchApiUrl` 未包含 `key=`，则自动以查询参数追加；写入HTML时对密钥做脱敏（不输出明文）。
- `maxTopics`：分析的热搜数量上限（默认 20，范围 5–50）。
- `outputHtmlPath`：HTML输出路径（默认 `omni-hotsearch-report.html`）。
- `searchLanguage`：检索语言（默认 `zh-CN`）。
- `searchRecencyDays`：检索时间窗口（默认 30 天，范围 1–365）。
- `ideasPerTopic`：每条热点产出的产品创意数量（默认 2，范围 1–4）。

### 已适配的示例API：天行数据「全网热搜」

- 请求方式：GET
- 接口：`https://apis.tianapi.com/networkhot/index`
- 参数：`key=<API_KEY>`
- 若用户只提供了接口不含 `key`，可用 `hotSearchApiKey` 补全；不要在对话输出或HTML里泄露完整密钥。
- 若用户把 `key` 直接写进 `hotSearchApiUrl`：也必须对URL里的 `key` 参数做脱敏展示（只保留前4位与后4位，中间用 `***` 替代）。

## 默认值与降级策略（缺失也不打断）

- 未提供 `maxTopics`：取 20。
- API返回超过上限：只取热度最高或排名最靠前的前 `maxTopics` 条。
- API无法提供热度值：用“排名”替代排序依据，并在报告中标注“热度值缺失”。
- Web Search失败或结果稀少：
  - 至少保留 1 次检索尝试；
  - 以“已知公开信息不足”标注，并输出“可能原因/待核实点”，继续下一条热点。
- 输出过长：
  - 来源链接每条热点最多 4 个；
  - 事件脉络（时间线）最多 5 条；
  - 产品创意保持不变，但每个创意的核心功能压缩到 3 条。

## 目标输出（强约束）

必须生成**1个**HTML文件（`outputHtmlPath`），内容为**列表式**热点卡片，包含：

- 热点标题、排名/热度（如有）、简述（发生了什么+当前进展）
- 事件脉络（时间线/关键节点列表）
- 背景与影响（简短）
- 产品创意（每条热点至少 1 个，默认 2 个）：
  - 名称
  - 核心功能（3–5条）
  - 目标用户描述
- 评分：
  - 有趣度（0–80）
  - 有用度（0–20）
  - 总分（0–100）
  - 等级：优秀（≥80）、良好（60–79）、一般（<60）
- 来源（可点击链接列表）

并且：
- 对“优秀（≥80）”热点卡片做明显高亮；
- 对“良好（60–79）”做次级强调；
- 列表默认按“总分降序”展示，同时显示原榜单排名以便对照。

## 工作流（按顺序执行）

### 1) 抓取热搜榜单并标准化

1. 请求 `hotSearchApiUrl` 获取榜单数据。
   - 若API返回“缺少API密钥参数”等错误：优先尝试将 `hotSearchApiKey` 以 `key=` 追加到URL后重试一次；仍失败则在HTML总览区标注失败原因并终止后续分析（因为无榜单输入）。
2. 将返回内容标准化为列表 `topics[]`，每个元素尽量包含：
   - `platform`（可选：来源平台，如 微博/抖音/百度/知乎/头条/快手/小红书/微信 等；缺失则填 `全网`）
   - `rank`（数字，缺失则按返回顺序生成）
   - `title`（字符串，必需；无法提取则丢弃该条）
   - `hotValue`（可选：数字/字符串）
   - `topicUrl`（可选：话题落地页）
   - `tag`（可选：爆/新/热等）
3. 解析兼容策略（自适应JSON结构，按顺序尝试直到提取出非空列表）：
   - `result.list`
   - `result.newslist`
   - `newslist`
   - `data.list`
   - `data`
   - 根节点数组
4. 字段映射兼容（同一字段多候选，先命中者优先）：
   - `title`：`title` / `word` / `keyword` / `name`
   - `hotValue`：`hotValue` / `hot` / `hotindex` / `hotnum` / `index` / `heat` / `score`
   - `topicUrl`：`url` / `link` / `topicUrl`
   - `rank`：`rank` / `index` / `order`
5. 清洗与去重：
   - 标题去首尾空格与无意义前后缀；
   - 同一 `platform` 内标题完全相同则保留排名更高者；
   - 不同平台标题相同则保留多条，但在HTML里合并展示为同一热点并列出多个平台徽章（若信息足够明确可合并，否则保持分开并标注“同名热点”）；
   - 过滤空标题与明显非话题项。

### 2) 为每个话题进行联网检索并生成“热点详细信息”

对每个 `title` 执行 2–4 次检索（按信息缺口自适应），优先覆盖：

- “发生了什么”：`{title} 发生了什么`
- “时间线/进展”：`{title} 时间线 最新进展`
- “背景/相关方”：`{title} 背景 相关方`
- “数据/影响”：`{title} 数据 影响`

若 `platform` 存在且有助于消歧，在查询末尾追加平台限定词（例如：`{title} 抖音`、`{title} 知乎`），并优先选择权威媒体/当事方/监管与平台公告来源。

整理输出一份可分析的“热点详细信息”结构（用于后续评分与创意生成），至少包含：

- `oneLineSummary`：一句话解释热点
- `whatHappened`：事件概述（可验证事实为主）
- `timeline[]`：3–6条关键节点（若缺失则尽量从报道时间点推断相对顺序并标注不确定）
- `stakeholders`：主要相关方（人/组织/平台/监管等）
- `whyTrending`：为什么上热搜（争议点/情绪点/利益点/政策点）
- `currentStatus`：当前进展（截至检索到的最新信息）
- `sources[]`：来源链接与简短出处名

### 3) 评分（总分100：有趣度80 + 有用度20）

#### 有趣度（0–80）

按下列4项各 0–20 评分，总和为有趣度（上限80）：

- 新奇性/意外性：是否有反直觉、强冲突、强反转
- 情绪与传播性：是否容易引发情绪共鸣、二创、梗化传播
- 讨论密度：多方观点、争议、信息增量是否持续出现
- 叙事完整度：人物/动机/结果是否清晰，是否便于讲成“故事”

#### 有用度（0–20）

按下列2项各 0–10 评分，总和为有用度（上限20）：

- 可行动性：是否能落到可执行任务、可量化目标、可复用流程
- 真实价值：是否解决真实痛点（效率/安全/合规/体验/成本），具备付费/增长潜力

#### 等级与展示规则

- 优秀：总分 ≥ 80（高亮展示）
- 良好：60 ≤ 总分 < 80（次级强调）
- 一般：总分 < 60（普通展示）

每条热点同时给出 1 句“评分理由摘要”，只解释最关键的 2–3 个因素。

### 4) 产品创意生成（与热点强相关、可开发）

对每条热点基于“热点详细信息”生成 `ideasPerTopic` 个产品创意（默认2个），要求：

- 必须与热点的“痛点/需求/机制”强绑定，避免泛化。
- 每个创意包含：
  - `name`：产品/功能名称（可品牌化）
  - `coreFeatures[]`：3–5条核心功能，动词开头，可实现
  - `targetUsers`：目标用户描述（具体到人群与场景）
- 选择“更能解释评分”的创意：高有用度热点要更偏可落地工具；高有趣度热点可偏娱乐化/传播型但仍需有产品化路径。

### 5) 生成HTML报告（单文件）

输出一个自包含HTML（含内联CSS），结构建议：

- 页面头部：标题、生成时间、数据源API、参数（maxTopics等）
- 总览区：
  - 优秀/良好/一般数量
  - Top5热点（按总分）
- 热点列表（按总分降序）：
  - 卡片：标题 + 平台徽章 + 榜单信息 + 评分徽章
  - 事件概述（简短）
  - 事件脉络（ul/li）
  - 产品创意（可用 table 或分段）
  - 来源链接（ul/li）

必须写入到 `outputHtmlPath`，并在最终回复中仅输出：

- 生成成功的文件路径
- 优秀/良好数量与Top3标题（不贴整篇HTML到对话里）

## 质量自检（写入HTML前完成）

- 每条热点至少 1 个来源链接，若没有则明确标注“来源不足”
- 每条热点至少 1 个产品创意
- 评分范围合法且总分=有趣度+有用度
- “优秀/良好/一般”分级与高亮一致
- 事实与不确定性有区分：不把猜测写成确定事实

## Few-shot 示例

### Good Case（一步到位）

用户：
> 用这个API抓取全网热搜并生成产品创意HTML报告：  
> hotSearchApiUrl=https://example.com/omni/hotsearch  
> maxTopics=20  
> outputHtmlPath=omni-report.html

你应该：
- 直接抓取、检索、分析、评分、生成 `omni-report.html`
- 在对话回复里只给路径 + 摘要（不要粘贴整份HTML）

### Anti-Patterns（禁止）

- “请问你的API返回格式是什么？我需要你先给我一份样例。”（应当先尝试抓取并自适应解析）
- “要不要我对每个话题都搜索一下？”（必须默认执行）
- “你希望输出成Markdown还是HTML？”（强制HTML）

## 测试与验证矩阵（用于你自测触发与稳定性）

- 正常触发：用户提供API并要求“全网热搜+产品创意+HTML报告”
- 边缘情况：
  - API返回缺少热度值/排名字段
  - API混合多个平台且同名热点重复出现
  - 某条话题搜索不到权威来源
  - 话题数量超过maxTopics
- 干扰排除：
  - 用户只问“全网热搜是什么”
  - 用户要做“竞品分析/PR稿”但未要求抓榜与HTML
